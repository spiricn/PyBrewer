<%

from brewer.LogHandler import LogHandler

import os

import logging


LOG_LEVEL_MAP = {
    logging.DEBUG : 'DEBUG',
    logging.INFO : 'INFO',
    logging.WARN : 'WARNING',
    logging.ERROR : 'ERROR',
    logging.CRITICAL : 'CRITICAL',
    
}
%>

<%include file="Header.html"/>

<script>


function clearLogs() {
    var xhr = new XMLHttpRequest();
    xhr.open('POST', 'rest/log/clear');

    xhr.onreadystatechange  = function() {
        location.reload();
    };
    
    xhr.onerror = function() {
        alert('toggle failed (error: ' + xhr.status + ')');
    };

    xhr.send()
}

</script>

</head>

<body>

<button  onClick="clearLogs()"> Clear logs </button>

<table border="1">
<tr>
<th> Level </th> <th> Module </th> <th> Message </th> <th> Time </th>
</tr>

%for level, module, message, time in Brewer.getModule(LogHandler).getLogs():

<tr>

<td> ${LOG_LEVEL_MAP[level]} </td>
<td> ${module} </td>
<td> ${message} </td>
<td> ${time} </td>

</tr>

% endfor

</table>

</body>

</html>

